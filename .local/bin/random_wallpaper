#!/bin/bash

#
# random_wallpaer
# 
# Desc: This discovers the number of active displays and sets
# a separate random wallpaper for each.  I checks the number
# of displays to find the correct display names whether my
# notebook is docked or not.  You can edit the display names
# and the no of displays to check if you only use two
# 
# Requirements
# swaywm and swaybg to set wallpaper
#


NODISPLAYS=$(echo $(swaymsg -t get_outputs | grep DP | wc -l ))
WALLPAPER_DIR="$HOME/Media/Pictures/wallpaper/1900"
CACHE_DIR="$HOME/.cache"

if [[ NODISPLAYS -gt 2 ]]
then
	DISPLAYS="DP-3 DP-4 DP-5"
else
	DISPLAYS="HDMI-1-A eDP-1"
fi

killall swaybg

count=1
for OUTPUT in $DISPLAYS
do
	WALLPAPER=$CACHE_DIR/wallpaper$count.jpg
	cp $WALLPAPER_DIR/$(ls $WALLPAPER_DIR | shuf -n 1) $WALLPAPER
	swaymsg exec "swaybg -o $OUTPUT -i $WALLPAPER -m fill"
	count=$((count + 1))
done

