#!/bin/bash

NODISPLAYS=$(echo $(swaymsg -t get_outputs | grep DP | wc -l ))
WALLPAPER_DIR="$HOME/Media/Pictures/wallpaper/1900"
THEMES_DIR="$HOME/.config/sway/themes"
WALLPAPER1=$(ls $WALLPAPER_DIR | shuf -n 1)
WALLPAPER2=$(ls $WALLPAPER_DIR | shuf -n 1)
WALLPAPER3=$(ls $WALLPAPER_DIR | shuf -n 1)

cp $WALLPAPER_DIR/$WALLPAPER1 $THEMES_DIR/wallpaper1.jpg
cp $WALLPAPER_DIR/$WALLPAPER2 $THEMES_DIR/wallpaper2.jpg
cp $WALLPAPER_DIR/$WALLPAPER3 $THEMES_DIR/wallpaper3.jpg

if [ "$1" != "set" ]
then
	if [[ NODISPLAYS -gt 2 ]]
	then
		DISPLAYS="DP-3 DP-4 DP-5"
	else
		DISPLAYS="DP-2 eDP-1"
	fi
	count=1
	for OUTPUT in $DISPLAYS
	do
		WALLPAPER=$(ls $WALLPAPER_DIR | shuf -n 1)
		swaymsg exec "swaybg -o $OUTPUT -i $THEMES_DIR/wallpaper$count.jpg -m fill"
		count=$((count + 1))
	done
fi

