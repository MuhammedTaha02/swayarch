#!/bin/bash

WORKINGDIR="$HOME/.config/rofi/"

[ ! -f "$WORKINGDIR/$@.csv" ] && exit 0


MAP="$WORKINGDIR/$@.csv"
LINES="$(wc -l < $MAP)"

if [ "$LINES" -gt 15 ]
then
	LINES=15
fi

cat "$MAP" \
    | cut -d ',' -f 1 \
    | rofi -dmenu -p "$@ " -no-case-sensitive -width 40 -lines "$LINES" \
    | head -n 1 \
    | xargs -i --no-run-if-empty grep "{}" "$MAP" \
    | cut -d ',' -f 2 \
    | head -n 1 \
    | xargs -i --no-run-if-empty /bin/bash -c "{}"

exit 0
